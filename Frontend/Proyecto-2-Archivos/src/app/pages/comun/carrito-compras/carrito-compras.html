<div class="container mt-4">
  <div class="card shadow-lg">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h4>🛒 Tu Carrito</h4>
      <button class="btn btn-danger btn-sm" (click)="clearCart()">Borrar Carrito</button>
    </div>

    <div class="card-body" *ngIf="cart.length > 0; else emptyCart">
      <table class="table table-striped align-middle text-center">
        <thead>
          <tr>
            <th>Imagen</th>
            <th>Producto</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
            <th>Eliminar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of cart">
            <td><img [src]="p.imagen" width="50"></td>
            <td>{{ p.nombre }}</td>
            <td>{{ p.precio }}</td>
            <td>
              <input type="number" class="form-control w-50 mx-auto text-center"
                     [(ngModel)]="p.stock" (change)="updateQuantity()">
            </td>
            <td>{{ p.precio * p.stock }}</td>
            <td><button class="btn btn-outline-danger btn-sm" (click)="remove(p.id_producto)">🗑️</button></td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-between mt-3">
        <h5>Total: {{ total }}</h5>
        <button class="btn btn-success" (click)="pagar()">Pagar</button>
      </div>
    </div>

    <ng-template #emptyCart>
      <div class="text-center p-4">
        <p>No hay productos en el carrito.</p>
      </div>
    </ng-template>
  </div>
</div>